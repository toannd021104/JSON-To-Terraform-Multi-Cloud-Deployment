## Cloud-init Configuration Template
# Optimized for Ubuntu, Linux, Windows, OpenStack
# Best practice configuration with essential modules

# Core Settings
preserve_hostname: false
disable_root: true
ssh_pwauth: false

# Default User
users:
  - default

# Network (disable if using cloud networking)
# network:
#   config: disabled

# Stage 1: Init - System Initialization
cloud_init_modules:
  - bootcmd
  - write_files
  - growpart
  - resizefs
  - disk_setup
  - mounts
  - set_hostname
  - update_hostname
  - update_etc_hosts
  - ca_certs
  - rsyslog
  - users_groups
  - ssh

# Stage 2: Config - Configuration
cloud_config_modules:
  - ssh_import_id
  - locale
  - timezone
  - apt_configure
  - ntp
  - runcmd

# Stage 3: Final - Post-Configuration
cloud_final_modules:
  - package_update_upgrade_install
  - write_files_deferred
  - scripts_vendor
  - scripts_per_once
  - scripts_per_boot
  - scripts_per_instance
  - scripts_user
  - ssh_authkey_fingerprints
  - final_message
  - power_state_change