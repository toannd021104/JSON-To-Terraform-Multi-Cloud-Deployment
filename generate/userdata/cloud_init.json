{
  "target": "linux",
  "package": [
    {
      "name": "git"
    },
    {
      "name": "traceroute"
    }
  ],
  "files": [
    {
      "path": "/opt/original-file.txt",
      "type": "file",
      "content": "Original file!",
      "owner": "root:root",
      "mode": "0644",
      "backup": true
    },
    {
      "path": "/opt/dir",
      "type": "dir",
      "owner": "root:root",
      "mode": "0755"
    },
    {
      "path": "/opt/symlink",
      "type": "link",
      "target": "/opt/test",
      "owner": "root:root",
      "mode": "0755"
    },
    {
      "path": "/opt/source",
      "type": "file",
      "source": "https://raw.githubusercontent.com/canonical/cloud-init/main/doc/examples/cloud-config.txt",
      "owner": "root:root",
      "mode": "0755"
    }
  ],
  "exec": [
    {
      "command": "echo 'Test file created at '$(date) > /tmp/test-app.log",
      "creates": "/tmp/test-app.log",
      "cwd": "/tmp",
      "environment": ["TEST_ENV=production", "TEST_DATE=$(date +%Y%m%d)"],
      "onlyif": "test -d /tmp",
      "timeout": 10
    },
    {
      "command": "echo 'Directory listing:' && ls -lah /tmp/test-*",
      "unless": "test -f /tmp/test-app.log"
    },
    {
      "command": "echo 'System uptime:' && uptime > /tmp/uptime.log",
      "onlyif": "test -w /tmp"
    },
    "echo 'Simple command without options'"
  ],
  "hostname": "toanquoc",
  "timezone": "Asia/Ho_Chi_Minh",
  "locale": "en_US.UTF-8",
  "groups": ["devops", "monitoring", "docker", "toanquoc"],
  "users": [
    "default",
    {
      "name": "ubuntu1",
      "gecos": "Ubuntu Test User",
      "primary_group": "toanquoc",
      "password": "ubuntu"
    }
  ]
}
